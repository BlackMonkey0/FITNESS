<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Fitness Tracker | Seguimiento Inteligente</title>
    <meta name="description" content="Sistema de seguimiento fitness con IA para registrar comidas, ejercicios y biometr칤a">
    
    <!-- Fuentes y estilos -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- Canvas para efecto Matrix (si lo usas) -->
<canvas id="matrixCanvas"></canvas>

<!-- Header principal -->
<header class="main-header">
    <div class="header-container">
        <div class="logo-section">
            <div class="logo-icon">
                <i class="fas fa-dumbbell"></i>
            </div>
            <div class="logo-text">
                <h1>AI FITNESS TRACKER</h1>
                <p class="subtitle">NEURAL-LINK v4.0 | BIO-ESC츼NER ACTIVO</p>
            </div>
        </div>
        
        <div class="header-controls">
            <div class="clock-display">
                <div class="time" id="currentTime">--:--:--</div>
                <div class="date" id="currentDate">--- --- -- ----</div>
            </div>
            
            <button id="gymModeBtn" class="gym-mode-btn" aria-label="Activar modo gimnasio">
                <i class="fas fa-fire"></i>
                <span>MODO GYM</span>
            </button>
            
            <button id="themeToggle" class="theme-toggle" aria-label="Cambiar tema">
                <i class="fas fa-moon"></i>
            </button>
        </div>
    </div>
</header>

<!-- Navegaci칩n por pesta침as -->
<nav class="main-nav" role="tablist" aria-label="Navegaci칩n principal">
    <button class="nav-tab active" data-target="dashboard" role="tab" aria-selected="true">
        <i class="fas fa-tachometer-alt"></i>
        <span>Dashboard</span>
    </button>
    <button class="nav-tab" data-target="meals" role="tab" aria-selected="false">
        <i class="fas fa-utensils"></i>
        <span>Comidas</span>
    </button>
    <button class="nav-tab" data-target="workout" role="tab" aria-selected="false">
        <i class="fas fa-dumbbell"></i>
        <span>Entrenamiento</span>
    </button>
    <button class="nav-tab" data-target="body" role="tab" aria-selected="false">
        <i class="fas fa-user"></i>
        <span>Biometr칤a</span>
    </button>
    <button class="nav-tab" data-target="coach" role="tab" aria-selected="false">
        <i class="fas fa-robot"></i>
        <span>IA Coach</span>
    </button>
    <!-- CAMBIADO: Ahora es un enlace en lugar de un bot칩n con data-target -->
    <a href="lista-compra.html" class="nav-tab" style="text-decoration: none;">
        <i class="fas fa-shopping-cart"></i>
        <span>Compras</span>
    </a>

    <button class="nav-tab" data-target="settings" role="tab" aria-selected="false">
        <i class="fas fa-cog"></i>
        <span>Configuraci칩n</span>
    </button>
</nav>

<!-- Contenido principal -->
<main class="main-content">
    
    <!-- DASHBOARD -->
    <section id="dashboard" class="content-section active" role="tabpanel" aria-labelledby="dashboard-tab">
        <div class="section-header">
            <h2><i class="fas fa-chart-line"></i> Panel de Control</h2>
            <div class="header-actions">
                <div class="last-update" id="lastUpdateText">칔ltima actualizaci칩n: --:--</div>
                <button id="refreshData" class="refresh-btn" aria-label="Actualizar datos">
                    <i class="fas fa-sync-alt"></i>
                </button>
            </div>
        </div>
        
        <div class="stats-grid">
            <!-- Tarjeta de calor칤as -->
            <div class="stat-card">
                <div class="card-header">
                    <h3><i class="fas fa-fire"></i> Calor칤as Hoy</h3>
                    <span class="goal-text">Meta: <span id="calorieGoal">2500</span> kcal</span>
                </div>
                <div class="card-body">
                    <div class="main-value" id="todayCaloriesDisplay">0 kcal</div>
                    <div class="progress-container">
                        <div class="progress-bar" role="progressbar">
                            <div class="progress-fill" id="calorieProgress" style="width: 0%"></div>
                        </div>
                        <div class="progress-labels">
                            <span id="caloriePercent">0%</span>
                            <span id="caloriesRemaining">2500 kcal restantes</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Tarjeta de prote칤na -->
            <div class="stat-card">
                <div class="card-header">
                    <h3><i class="fas fa-dna"></i> Prote칤na Hoy</h3>
                    <span class="goal-text">Meta: <span id="proteinGoal">120</span> g</span>
                </div>
                <div class="card-body">
                    <div class="main-value" id="todayProteinDisplay">0 g</div>
                    <div class="progress-container">
                        <div class="progress-bar" role="progressbar">
                            <div class="progress-fill" id="proteinProgress" style="width: 0%"></div>
                        </div>
                        <div class="progress-labels">
                            <span id="proteinPercent">0%</span>
                            <span id="proteinRemaining">120 g restantes</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Resumen diario -->
            <div class="stat-card summary-card">
                <h3><i class="fas fa-clipboard-list"></i> Resumen Diario</h3>
                <div class="summary-grid">
                    <div class="summary-item">
                        <div class="summary-icon">
                            <i class="fas fa-utensils"></i>
                        </div>
                        <div class="summary-text">
                            <div class="summary-value" id="mealsCount">0</div>
                            <div class="summary-label">Comidas</div>
                        </div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-icon">
                            <i class="fas fa-dumbbell"></i>
                        </div>
                        <div class="summary-text">
                            <div class="summary-value" id="workoutsCount">0</div>
                            <div class="summary-label">Ejercicios</div>
                        </div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-icon">
                            <i class="fas fa-tint"></i>
                        </div>
                        <div class="summary-text">
                            <div class="summary-value" id="waterCount">0</div>
                            <div class="summary-label">Vasos agua</div>
                        </div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-icon">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <div class="summary-text">
                            <div class="summary-value" id="streakDays">0</div>
                            <div class="summary-label">D칤as seguidos</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Gr치fico de evoluci칩n -->
            <div class="stat-card chart-card">
                <h3><i class="fas fa-weight"></i> Evoluci칩n de Peso</h3>
                <div class="chart-container">
                    <canvas id="weightChart" aria-label="Gr치fico de evoluci칩n de peso"></canvas>
                </div>
                <div class="chart-legend">
                    <span class="legend-item"><i class="fas fa-circle" style="color: #4CAF50;"></i> Peso (kg)</span>
                    <span class="legend-item"><i class="fas fa-circle" style="color: #2196F3;"></i> Grasa (%)</span>
                </div>
            </div>
        </div>
        
        <!-- Acciones r치pidas -->
        <div class="quick-actions-section">
            <h3><i class="fas fa-bolt"></i> Acciones R치pidas</h3>
            <div class="action-buttons">
                <button id="addWaterBtn" class="action-btn">
                    <i class="fas fa-tint"></i>
                    <span>Agregar agua</span>
                </button>
                <button id="addQuickMealBtn" class="action-btn">
                    <i class="fas fa-apple-alt"></i>
                    <span>Comida r치pida</span>
                </button>
                <button id="addQuickWorkoutBtn" class="action-btn" onclick="addQuickWorkout()">
                    <i class="fas fa-running"></i>
                    <span>Ejercicio r치pido</span>
                </button>
                <button id="generateReportBtn" class="action-btn">
                    <i class="fas fa-file-pdf"></i>
                    <span>Generar reporte</span>
                </button>
            </div>
        </div>
    </section>
    
    <!-- GESTI칍N DE COMIDAS (CON CALENDARIO COMPLETO) -->
    <section id="meals" class="content-section" role="tabpanel" aria-labelledby="meals-tab" hidden>
        <div class="section-header">
            <h2><i class="fas fa-utensils"></i> Gesti칩n de Comidas</h2>
            <p class="section-subtitle">Registra y analiza tu consumo nutricional</p>
        </div>
        
        <!-- CALENDARIO COMPLETO PARA SELECCIONAR FECHA -->
        <div class="calendar-section">
            <div class="calendar-header">
                <h3><i class="fas fa-calendar-alt"></i> Calendario Nutricional</h3>
                <div class="calendar-summary">
                    <div class="summary-item">
                        <i class="fas fa-fire"></i>
                        <span id="monthCalories">0 kcal</span>
                        <small>Mes actual</small>
                    </div>
                    <div class="summary-item">
                        <i class="fas fa-dna"></i>
                        <span id="monthProtein">0g</span>
                        <small>Prote칤na total</small>
                    </div>
                    <div class="summary-item">
                        <i class="fas fa-utensils"></i>
                        <span id="monthMeals">0</span>
                        <small>Comidas</small>
                    </div>
                </div>
            </div>
            
            <div class="calendar-wrapper">
                <!-- Controles del calendario -->
                <div class="calendar-controls">
                    <button id="prevYear" class="calendar-nav-btn" title="A침o anterior">
                        <i class="fas fa-angle-double-left"></i>
                    </button>
                    <button id="prevMonth" class="calendar-nav-btn" title="Mes anterior">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    
                    <div class="calendar-title">
                        <select id="monthSelect" class="month-select" title="Seleccionar mes">
                            <option value="0">Enero</option>
                            <option value="1">Febrero</option>
                            <option value="2">Marzo</option>
                            <option value="3">Abril</option>
                            <option value="4">Mayo</option>
                            <option value="5">Junio</option>
                            <option value="6">Julio</option>
                            <option value="7">Agosto</option>
                            <option value="8">Septiembre</option>
                            <option value="9">Octubre</option>
                            <option value="10">Noviembre</option>
                            <option value="11">Diciembre</option>
                        </select>
                        <input type="number" id="yearSelect" class="year-input" min="2020" max="2030" value="2024" title="Seleccionar a침o">
                    </div>
                    
                    <button id="nextMonth" class="calendar-nav-btn" title="Mes siguiente">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                    <button id="nextYear" class="calendar-nav-btn" title="A침o siguiente">
                        <i class="fas fa-angle-double-right"></i>
                    </button>
                    
                    <button id="todayBtn" class="today-btn" title="Ir a hoy">
                        <i class="fas fa-calendar-day"></i> Hoy
                    </button>
                </div>
                
                <!-- Calendario -->
                <div class="calendar-container">
                    <div class="calendar-weekdays">
                        <div class="weekday">Lun</div>
                        <div class="weekday">Mar</div>
                        <div class="weekday">Mi칠</div>
                        <div class="weekday">Jue</div>
                        <div class="weekday">Vie</div>
                        <div class="weekday">S치b</div>
                        <div class="weekday">Dom</div>
                    </div>
                    
                    <div id="calendarDays" class="calendar-days">
                        <!-- Los d칤as se generan din치micamente con JavaScript -->
                    </div>
                </div>
                
                <!-- Leyenda del calendario -->
                <div class="calendar-legend">
                    <div class="legend-item">
                        <span class="legend-color" style="background-color: var(--color-success);"></span>
                        <span>Alta actividad</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color" style="background-color: var(--color-warning);"></span>
                        <span>Meta calor칤as</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color" style="background-color: var(--color-danger);"></span>
                        <span>Exceso calor칤as</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color" style="background-color: var(--color-primary);"></span>
                        <span>Comidas registradas</span>
                    </div>
                </div>
            </div>
            
            <!-- Informaci칩n de la fecha seleccionada -->
            <div class="selected-date-info">
                <div class="date-header">
                    <h4><i class="fas fa-calendar-day"></i> Fecha seleccionada</h4>
                    <span id="selectedDateText" class="selected-date">Hoy</span>
                </div>
                
                <div id="selectedDateStats" class="date-stats">
                    <div class="stat-row">
                        <div class="stat-box">
                            <div class="stat-label">Calor칤as</div>
                            <div class="stat-value" id="dayCalories">0</div>
                            <div class="stat-unit">kcal</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Prote칤na</div>
                            <div class="stat-value" id="dayProtein">0</div>
                            <div class="stat-unit">g</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Comidas</div>
                            <div class="stat-value" id="dayMeals">0</div>
                            <div class="stat-unit">registros</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Ejercicios</div>
                            <div class="stat-value" id="dayExercises">0</div>
                            <div class="stat-unit">sesiones</div>
                        </div>
                    </div>
                    
                    <div class="date-actions">
                        <button id="addMealToDate" class="action-btn small-btn">
                            <i class="fas fa-plus"></i> A침adir comida
                        </button>
                        <button id="viewDayDetails" class="action-btn small-btn">
                            <i class="fas fa-chart-bar"></i> Ver detalle
                        </button>
                        <button id="copyDayPlan" class="action-btn small-btn">
                            <i class="fas fa-copy"></i> Copiar plan
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="meals-container">
            <!-- Formulario para nueva comida -->
            <div class="meals-form">
                <h3><i class="fas fa-plus-circle"></i> Nueva Comida</h3>
                
                <div class="form-group">
                    <label for="mealNameInput">
                        <i class="fas fa-tag"></i> Nombre de la comida
                    </label>
                    <input type="text" id="mealNameInput" placeholder="Ej: Desayuno, Almuerzo, Cena...">
                </div>
                
                <!-- Formulario con an치lisis IA -->
                <div class="form-group">
                    <label for="mealDescription">
                        <i class="fas fa-edit"></i> Descripci칩n
                        <button type="button" id="analyzeMealBtn" class="analyze-btn" title="Analizar con IA">
                            <i class="fas fa-robot"></i> Analizar
                        </button>
                    </label>
                    <textarea id="mealDescription" rows="3" placeholder="Describe lo que comiste (ej: 'Un s치ndwich de jam칩n y queso con lechuga y tomate, una manzana y un vaso de leche')"></textarea>
                </div>
                
                <!-- Resultado del an치lisis IA -->
                <div id="aiAnalysisResult" class="ai-analysis-result" style="display: none;">
                    <h4><i class="fas fa-brain"></i> An치lisis IA</h4>
                    <div class="ai-suggestions">
                        <p>Valores sugeridos basados en tu descripci칩n:</p>
                        <div class="ai-values">
                            <span>Calor칤as: <strong id="aiCalories">0</strong> kcal</span>
                            <span>Prote칤na: <strong id="aiProtein">0</strong> g</span>
                            <span>Carbs: <strong id="aiCarbs">0</strong> g</span>
                            <span>Grasas: <strong id="aiFat">0</strong> g</span>
                        </div>
                        <div class="ai-actions">
                            <button id="applyAiValues" class="secondary-btn small-btn">
                                <i class="fas fa-check"></i> Aplicar valores
                            </button>
                            <button id="retryAnalysis" class="secondary-btn small-btn">
                                <i class="fas fa-redo"></i> Re-analizar
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="nutrition-inputs">
                    <div class="input-row">
                        <div class="input-group">
                            <label for="mealCaloriesInput">
                                <i class="fas fa-fire"></i> Calor칤as (kcal)
                            </label>
                            <input type="number" id="mealCaloriesInput" min="0" step="1" placeholder="0">
                        </div>
                        <div class="input-group">
                            <label for="mealProteinInput">
                                <i class="fas fa-dna"></i> Prote칤na (g)
                            </label>
                            <input type="number" id="mealProteinInput" min="0" step="0.1" placeholder="0">
                        </div>
                    </div>
                    
                    <div class="input-row">
                        <div class="input-group">
                            <label for="mealCarbsInput">
                                <i class="fas fa-bread-slice"></i> Carbohidratos (g)
                            </label>
                            <input type="number" id="mealCarbsInput" min="0" step="0.1" placeholder="0">
                        </div>
                        <div class="input-group">
                            <label for="mealFatInput">
                                <i class="fas fa-bacon"></i> Grasas (g)
                            </label>
                            <input type="number" id="mealFatInput" min="0" step="0.1" placeholder="0">
                        </div>
                    </div>
                </div>
                
                <!-- Selector de fecha para la comida -->
                <div class="form-group">
                    <label for="mealDateInput">
                        <i class="fas fa-calendar"></i> Fecha de la comida
                    </label>
                    <div class="date-input-group">
                        <input type="date" id="mealDateInput" value="">
                        <button id="useSelectedDate" class="secondary-btn small-btn" title="Usar fecha seleccionada en calendario">
                            <i class="fas fa-calendar-check"></i> Usar fecha seleccionada
                        </button>
                    </div>
                </div>
                
                <!-- Notas adicionales -->
                <div class="form-group">
                    <label for="mealNotes">
                        <i class="fas fa-sticky-note"></i> Notas adicionales
                    </label>
                    <textarea id="mealNotes" rows="2" placeholder="Horario, sensaciones, alimentos espec칤ficos..."></textarea>
                </div>
                
                <div class="form-actions">
                    <button id="saveMealBtn" class="primary-btn">
                        <i class="fas fa-save"></i> Guardar Comida
                    </button>
                    <button id="clearMealForm" class="secondary-btn">
                        <i class="fas fa-times"></i> Limpiar
                    </button>
                    <button id="quickSaveMeal" class="secondary-btn">
                        <i class="fas fa-bolt"></i> Guardar r치pido
                    </button>
                </div>
            </div>
            
            <!-- Lista de comidas del d칤a seleccionado -->
            <div class="meals-list">
                <div class="list-header">
                    <h3><i class="fas fa-history"></i> Comidas del D칤a</h3>
                    <div class="list-summary">
                        <span id="dayTotalCalories">0 kcal</span>
                        <span id="dayTotalProtein">0g prote칤na</span>
                        <button id="sortMealsBtn" class="sort-btn" title="Ordenar comidas">
                            <i class="fas fa-sort-amount-down"></i>
                        </button>
                    </div>
                </div>
                
                <div class="meals-scrollable">
                    <div id="mealsListContainer" class="meals-items">
                        <div class="empty-state">
                            <i class="fas fa-utensils"></i>
                            <p>No hay comidas registradas</p>
                            <small>Selecciona una fecha o a침ade una nueva comida</small>
                        </div>
                    </div>
                </div>
                
                <!-- Totales del d칤a -->
                <div class="daily-totals">
                    <div class="total-header">
                        <h4><i class="fas fa-calculator"></i> Totales del D칤a</h4>
                        <div class="total-progress">
                            <div class="progress-circle">
                                <svg width="40" height="40">
                                    <circle class="progress-bg" cx="20" cy="20" r="18"></circle>
                                    <circle class="progress-fill" cx="20" cy="20" r="18" 
                                            style="stroke-dasharray: 113.097; stroke-dashoffset: 56.5485;"></circle>
                                </svg>
                                <span id="calorieProgressPercent">50%</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="total-grid">
                        <div class="total-item">
                            <span class="total-label">Calor칤as</span>
                            <div class="total-value-container">
                                <span class="total-value" id="totalCaloriesDay">0</span>
                                <span class="total-unit">kcal</span>
                            </div>
                            <div class="total-goal">Meta: <span id="calorieGoalDay">2500</span> kcal</div>
                        </div>
                        <div class="total-item">
                            <span class="total-label">Prote칤na</span>
                            <div class="total-value-container">
                                <span class="total-value" id="totalProteinDay">0</span>
                                <span class="total-unit">g</span>
                            </div>
                            <div class="total-goal">Meta: <span id="proteinGoalDay">120</span> g</div>
                        </div>
                        <div class="total-item">
                            <span class="total-label">Carbohidratos</span>
                            <div class="total-value-container">
                                <span class="total-value" id="totalCarbsDay">0</span>
                                <span class="total-unit">g</span>
                            </div>
                            <div class="total-goal">Recomendado: 250-300g</div>
                        </div>
                        <div class="total-item">
                            <span class="total-label">Grasas</span>
                            <div class="total-value-container">
                                <span class="total-value" id="totalFatDay">0</span>
                                <span class="total-unit">g</span>
                            </div>
                            <div class="total-goal">Recomendado: 60-70g</div>
                        </div>
                    </div>
                </div>
                
                <!-- Ejercicios del d칤a -->
                <div class="day-exercises">
                    <div class="exercises-header">
                        <h4><i class="fas fa-dumbbell"></i> Ejercicios del D칤a</h4>
                        <span class="calories-burned" id="dayCaloriesBurned">0 kcal quemadas</span>
                    </div>
                    <div id="dayExercisesContainer" class="exercises-items">
                        <div class="empty-state small">
                            <i class="fas fa-dumbbell"></i>
                            <p>No hay ejercicios registrados</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Historial de d칤as anteriores -->
        <div class="history-section">
            <h3><i class="fas fa-calendar-alt"></i> Resumen Mensual</h3>
            <div class="history-filters">
                <button class="filter-btn active" data-period="7">칔ltimos 7 d칤as</button>
                <button class="filter-btn" data-period="30">칔ltimos 30 d칤as</button>
                <button class="filter-btn" data-period="90">칔ltimos 3 meses</button>
                <select id="historyMonthSelect" class="month-select">
                    <option value="">Seleccionar mes</option>
                </select>
                <button id="exportHistoryBtn" class="secondary-btn small-btn">
                    <i class="fas fa-download"></i> Exportar
                </button>
            </div>
            
            <div class="history-container">
                <div class="history-stats-overview">
                    <div class="history-stat">
                        <div class="stat-label">Promedio calor칤as/d칤a</div>
                        <div class="stat-value" id="avgCaloriesHistory">0</div>
                    </div>
                    <div class="history-stat">
                        <div class="stat-label">D칤as activos</div>
                        <div class="stat-value" id="activeDaysHistory">0</div>
                    </div>
                    <div class="history-stat">
                        <div class="stat-label">Consistencia</div>
                        <div class="stat-value" id="consistencyHistory">0%</div>
                    </div>
                </div>
                
                <div id="mealsHistory" class="history-items">
                    <p class="empty-history">No hay historial disponible</p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- ENTRENAMIENTO -->
    <section id="workout" class="content-section" role="tabpanel" aria-labelledby="workout-tab" hidden>
        <div class="section-header">
            <h2><i class="fas fa-dumbbell"></i> Registro de Entrenamiento</h2>
            <p class="section-subtitle">Lleva el control de tus ejercicios y progreso hacia los 80kg</p>
        </div>
        
        <!-- Progreso hacia el objetivo -->
        <div class="workout-goal-card">
            <div class="goal-header">
                <h3><i class="fas fa-bullseye"></i> Objetivo: 80kg de M칰sculo</h3>
                <div class="goal-deadline">
                    <i class="fas fa-calendar-alt"></i>
                    <span id="daysRemaining">Loading...</span> d칤as restantes
                </div>
            </div>
            <div class="goal-progress">
                <div class="progress-stats">
                    <div class="stat-item">
                        <span class="stat-label">Peso Actual</span>
                        <span class="stat-value" id="currentWeightGoal">58.0 kg</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Objetivo</span>
                        <span class="stat-value">80.0 kg</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Restante</span>
                        <span class="stat-value" id="weightRemaining">22.0 kg</span>
                    </div>
                </div>
                <div class="progress-bar-container">
                    <div class="progress-bar-fill" id="goalProgressBar" style="width: 0%"></div>
                </div>
                <div class="progress-percentage" id="goalProgressPercent">0% completado</div>
            </div>
        </div>
        
        <div class="workout-container">
            <!-- Formulario de nuevo entrenamiento -->
            <div class="workout-form">
                <h3><i class="fas fa-plus-circle"></i> Registrar Entrenamiento</h3>
                
                <div class="form-group">
                    <label for="workoutType">
                        <i class="fas fa-list"></i> Tipo de Entrenamiento
                    </label>
                    <select id="workoutType" class="month-select">
                        <option value="">Seleccionar rutina...</option>
                        <option value="upper">Tren Superior</option>
                        <option value="lower">Tren Inferior</option>
                        <option value="push">Push (Empuje)</option>
                        <option value="pull">Pull (Jal칩n)</option>
                        <option value="legs">Piernas</option>
                        <option value="core">Core/Abdomen</option>
                        <option value="fullbody">Cuerpo Completo</option>
                        <option value="custom">Personalizado</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="exerciseName">
                        <i class="fas fa-dumbbell"></i> Ejercicio
                    </label>
                    <input type="text" id="exerciseName" placeholder="Ej: Press de banca, Sentadillas...">
                </div>
                
                <div class="exercise-details">
                    <div class="input-row">
                        <div class="input-group">
                            <label for="exerciseSets">
                                <i class="fas fa-layer-group"></i> Series
                            </label>
                            <input type="number" id="exerciseSets" min="1" max="10" value="3" placeholder="3">
                        </div>
                        <div class="input-group">
                            <label for="exerciseReps">
                                <i class="fas fa-redo"></i> Repeticiones
                            </label>
                            <input type="number" id="exerciseReps" min="1" max="100" value="10" placeholder="10">
                        </div>
                    </div>
                    
                    <div class="input-row">
                        <div class="input-group">
                            <label for="exerciseWeight">
                                <i class="fas fa-weight-hanging"></i> Peso (kg)
                            </label>
                            <input type="number" id="exerciseWeight" min="0" step="0.5" value="0" placeholder="0">
                        </div>
                        <div class="input-group">
                            <label for="exerciseRest">
                                <i class="fas fa-clock"></i> Descanso (seg)
                            </label>
                            <input type="number" id="exerciseRest" min="0" max="300" value="60" placeholder="60">
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="exerciseNotes">
                        <i class="fas fa-sticky-note"></i> Notas
                    </label>
                    <textarea id="exerciseNotes" rows="2" placeholder="Sensaciones, progreso, modificaciones..."></textarea>
                </div>
                
                <!-- Selector de fecha para el ejercicio -->
                <div class="form-group">
                    <label for="exerciseDateInput">
                        <i class="fas fa-calendar"></i> Fecha del ejercicio
                    </label>
                    <input type="date" id="exerciseDateInput" value="">
                </div>
                
                <div class="form-actions">
                    <button id="addExerciseBtn" class="primary-btn" onclick="addExercise()">
                        <i class="fas fa-plus"></i> A침adir Ejercicio
                    </button>
                    <button id="finishWorkoutBtn" class="secondary-btn" onclick="finishWorkout()">
                        <i class="fas fa-check"></i> Finalizar Entrenamiento
                    </button>
                </div>
                
                <!-- Ejercicios en sesi칩n actual -->
                <div id="currentSessionExercises" class="current-session">
                    <h4><i class="fas fa-play-circle"></i> Sesi칩n Actual</h4>
                    <div id="exercisesListContainer" class="session-exercises-list"></div>
                </div>
            </div>
            
            <!-- Rutinas r치pidas -->
            <div class="workout-routines">
                <h3><i class="fas fa-bolt"></i> Rutinas R치pidas</h3>
                <p class="routine-subtitle">Entrenamientos predefinidos para casa</p>
                
                <div class="routine-cards">
                    <div class="routine-card" data-routine="upper">
                        <div class="routine-icon">游눩</div>
                        <h4>Tren Superior</h4>
                        <p>Pecho, espalda, hombros y brazos</p>
                        <span class="routine-duration">~45 min</span>
                        <button onclick="loadQuickRoutine('upper')" class="routine-btn">
                            <i class="fas fa-play"></i> Iniciar
                        </button>
                    </div>
                    
                    <div class="routine-card" data-routine="lower">
                        <div class="routine-icon">游붯</div>
                        <h4>Tren Inferior</h4>
                        <p>Piernas, gl칰teos y pantorrillas</p>
                        <span class="routine-duration">~40 min</span>
                        <button onclick="loadQuickRoutine('lower')" class="routine-btn">
                            <i class="fas fa-play"></i> Iniciar
                        </button>
                    </div>
                    
                    <div class="routine-card" data-routine="fullbody">
                        <div class="routine-icon">游댠</div>
                        <h4>Cuerpo Completo</h4>
                        <p>Entrenamiento total</p>
                        <span class="routine-duration">~60 min</span>
                        <button onclick="loadQuickRoutine('fullbody')" class="routine-btn">
                            <i class="fas fa-play"></i> Iniciar
                        </button>
                    </div>
                    
                    <div class="routine-card" data-routine="core">
                        <div class="routine-icon">游눤</div>
                        <h4>Core Intenso</h4>
                        <p>Abdominales y estabilidad</p>
                        <span class="routine-duration">~25 min</span>
                        <button onclick="loadQuickRoutine('core')" class="routine-btn">
                            <i class="fas fa-play"></i> Iniciar
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Historial de entrenamientos -->
        <div class="workout-history">
            <div class="history-header">
                <h3><i class="fas fa-history"></i> Historial de Entrenamientos</h3>
                <div class="history-stats">
                    <span><i class="fas fa-calendar-check"></i> <span id="totalWorkouts">0</span> entrenamientos</span>
                    <span><i class="fas fa-dumbbell"></i> <span id="totalExercises">0</span> ejercicios</span>
                    <span><i class="fas fa-fire"></i> <span id="weekStreak">0</span> d칤as seguidos</span>
                    </div>
            </div>
            
            <div class="workout-calendar">
                <div id="workoutCalendar" class="calendar-grid"></div>
            </div>
            
            <div class="workout-list">
                <div id="workoutHistoryList" class="workout-history-items">
                    <div class="empty-state">
                        <i class="fas fa-dumbbell"></i>
                        <p>No hay entrenamientos registrados</p>
                        <small>춰Comienza tu primera sesi칩n!</small>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- BIOMETR칈A EXPANDIDA -->
    <section id="body" class="content-section" role="tabpanel" aria-labelledby="body-tab" hidden>
        <div class="section-header">
            <h2><i class="fas fa-user"></i> Seguimiento Biom칠trico</h2>
            <p class="section-subtitle">Registra y monitoriza tus mediciones corporales</p>
        </div>
        
        <div class="meals-container">
            <!-- Formulario de entrada -->
            <div class="meals-form">
                <h3><i class="fas fa-edit"></i> Nueva Medici칩n</h3>
                
                <div class="form-group">
                    <label for="bodyWeight">
                        <i class="fas fa-weight"></i> Peso (kg)
                    </label>
                    <input type="number" id="bodyWeight" step="0.1" placeholder="Ej: 75.5">
                </div>
                
                <div class="input-row">
                    <div class="input-group">
                        <label for="bodyFat">
                            <i class="fas fa-percentage"></i> Grasa Corporal (%)
                        </label>
                        <input type="number" id="bodyFat" step="0.1" placeholder="Ej: 18.5">
                    </div>
                    <div class="input-group">
                        <label for="bodyMusclePercent">
                            <i class="fas fa-dumbbell"></i> Masa Muscular (%)
                        </label>
                        <input type="number" id="bodyMusclePercent" step="0.1" placeholder="Ej: 45.2">
                    </div>
                </div>
                
                <div class="input-row">
                    <div class="input-group">
                        <label for="bodyWater">
                            <i class="fas fa-tint"></i> Agua Corporal (%)
                        </label>
                        <input type="number" id="bodyWater" step="0.1" placeholder="Ej: 55.0">
                    </div>
                    <div class="input-group">
                        <label for="bodyBone">
                            <i class="fas fa-bone"></i> Masa 칍sea (kg)
                        </label>
                        <input type="number" id="bodyBone" step="0.1" placeholder="Ej: 3.2">
                    </div>
                </div>
                
                <!-- Selector de fecha para la medici칩n -->
                <div class="form-group">
                    <label for="bodyDateInput">
                        <i class="fas fa-calendar"></i> Fecha de medici칩n
                    </label>
                    <input type="date" id="bodyDateInput" value="">
                </div>
                
                <button id="saveBodyBtn" class="primary-btn">
                    <i class="fas fa-save"></i> Guardar Medici칩n
                </button>
                
                <!-- Bot칩n de c치lculo autom치tico -->
                <button id="calculateBodyBtn" class="secondary-btn" style="margin-top: 10px;">
                    <i class="fas fa-calculator"></i> Calcular autom치ticamente
                </button>
            </div>
            
            <!-- Estad칤sticas actuales EXPANDIDAS -->
            <div class="meals-list">
                <h3><i class="fas fa-chart-line"></i> Estad칤sticas Actuales</h3>
                
                <div class="current-stats-expanded">
                    <div class="current-stat">
                        <div class="stat-name">Peso Actual</div>
                        <div class="stat-value" id="currentWeight">-- kg</div>
                        <div class="stat-change" id="weightChange">--</div>
                    </div>
                    
                    <div class="current-stat">
                        <div class="stat-name">IMC</div>
                        <div class="stat-value" id="currentBMI">--</div>
                        <div class="stat-category" id="bmiCategory">--</div>
                    </div>
                    
                    <div class="current-stat">
                        <div class="stat-name">Grasa Corporal</div>
                        <div class="stat-value" id="currentFat">--%</div>
                        <div class="stat-change" id="fatChange">--</div>
                    </div>
                    
                    <div class="current-stat">
                        <div class="stat-name">Masa Muscular</div>
                        <div class="stat-value" id="currentMusclePercent">--%</div>
                        <div class="stat-change" id="muscleChange">--</div>
                    </div>
                    
                    <div class="current-stat">
                        <div class="stat-name">Agua Corporal</div>
                        <div class="stat-value" id="currentWater">--%</div>
                        <div class="stat-change" id="waterChange">--</div>
                    </div>
                    
                    <div class="current-stat">
                        <div class="stat-name">Masa 칍sea</div>
                        <div class="stat-value" id="currentBone">-- kg</div>
                        <div class="stat-change" id="boneChange">--</div>
                    </div>
                </div>
                
                <!-- Gr치fico de composici칩n corporal -->
                <div class="body-composition-chart">
                    <h4><i class="fas fa-chart-pie"></i> Composici칩n Corporal</h4>
                    <div class="chart-container">
                        <canvas id="bodyCompositionChart"></canvas>
                    </div>
                </div>
                
                <div class="biometry-actions">
                    <button class="history-btn" onclick="showBiometryHistory()">
                        <i class="fas fa-history"></i> Ver Historial
                    </button>
                    <button class="export-btn" onclick="exportBiometryData()">
                        <i class="fas fa-download"></i> Exportar Datos
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Historial de mediciones -->
        <div class="history-section">
            <h3><i class="fas fa-history"></i> Historial de Mediciones</h3>
            <div id="biometryHistoryContainer" class="history-container">
                <p class="empty-history">No hay mediciones registradas</p>
            </div>
        </div>
    </section>

    <!-- ASISTENTE DE IA MEJORADO -->
    <section id="coach" class="content-section" role="tabpanel" aria-labelledby="coach-tab" hidden>
        <div class="section-header">
            <h2><i class="fas fa-robot"></i> AI Coach Pro</h2>
            <p class="section-subtitle">Tu entrenador personal de inteligencia artificial</p>
        </div>
        
        <div class="ai-coach-container">
            <!-- Panel de estado y perfil -->
            <div class="coach-status-panel">
                <div class="coach-profile">
                    <div class="coach-avatar">
                        <div class="avatar-icon">游뱄</div>
                        <div class="avatar-status online"></div>
                    </div>
                    <div class="coach-info">
                        <h3>Coach AI v4.0</h3>
                        <p class="coach-specialty">Entrenador certificado en nutrici칩n y fitness</p>
                        <div class="coach-stats">
                            <div class="stat-item">
                                <i class="fas fa-brain"></i>
                                <span>IA Neural</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-bolt"></i>
                                <span>24/7 Activo</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-shield-alt"></i>
                                <span>Privacidad</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="user-progress">
                    <h4><i class="fas fa-chart-line"></i> Tu Progreso</h4>
                    <div class="progress-metrics">
                        <div class="metric">
                            <span class="metric-label">Consistencia</span>
                            <div class="metric-bar">
                                <div class="metric-fill" style="width: 75%"></div>
                            </div>
                            <span class="metric-value">75%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Metas Alcanzadas</span>
                            <div class="metric-bar">
                                <div class="metric-fill" style="width: 60%"></div>
                            </div>
                            <span class="metric-value">60%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Motivaci칩n</span>
                            <div class="metric-bar">
                                <div class="metric-fill" style="width: 85%"></div>
                            </div>
                            <span class="metric-value">85%</span>
                        </div>
                    </div>
                </div>
                
                <div class="quick-actions-coach">
                    <h4><i class="fas fa-bolt"></i> Acciones R치pidas</h4>
                    <div class="action-buttons-coach">
                        <button class="action-btn-coach" data-action="analyze-day">
                            <i class="fas fa-chart-bar"></i>
                            <span>Analizar D칤a</span>
                        </button>
                        <button class="action-btn-coach" data-action="generate-plan">
                            <i class="fas fa-calendar-plus"></i>
                            <span>Nuevo Plan</span>
                        </button>
                        <button class="action-btn-coach" data-action="recipe-ideas">
                            <i class="fas fa-utensils"></i>
                            <span>Recetas</span>
                        </button>
                        <button class="action-btn-coach" data-action="workout-tips">
                            <i class="fas fa-dumbbell"></i>
                            <span>Tips Entreno</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Chat principal con IA -->
            <div class="coach-chat-main">
                <div class="chat-header-main">
                    <div class="chat-title">
                        <h3><i class="fas fa-comments"></i> Conversaci칩n con AI Coach</h3>
                        <div class="chat-status-indicator">
                            <span class="status-dot online"></span>
                            <span class="status-text">Conectado</span>
                        </div>
                    </div>
                    <div class="chat-controls">
                        <button class="chat-control-btn" id="clearChatBtn" title="Limpiar conversaci칩n">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                        <button class="chat-control-btn" id="saveChatBtn" title="Guardar conversaci칩n">
                            <i class="fas fa-save"></i>
                        </button>
                        <button class="chat-control-btn" id="exportChatBtn" title="Exportar">
                            <i class="fas fa-download"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Mensajes del chat -->
                <div id="chatMessages" class="chat-messages-container">
                    <div class="message ai-message">
                        <div class="message-avatar">
                            <div class="avatar ai-avatar">游뱄</div>
                        </div>
                        <div class="message-content">
                            <div class="message-header">
                                <span class="message-sender">AI Coach</span>
                                <span class="message-time">Ahora</span>
                            </div>
                            <div class="message-text">
                                춰Hola! Soy tu entrenador personal de IA. Estoy aqu칤 para ayudarte a alcanzar tus objetivos de fitness. 
                                He analizado tu progreso y tengo algunas recomendaciones personalizadas para ti hoy.
                            </div>
                            <div class="message-actions">
                                <button class="message-action" data-action="ask-nutrition">
                                    <i class="fas fa-apple-alt"></i> Nutrici칩n
                                </button>
                                <button class="message-action" data-action="ask-workout">
                                    <i class="fas fa-dumbbell"></i> Entrenamiento
                                </button>
                                <button class="message-action" data-action="ask-motivation">
                                    <i class="fas fa-fire"></i> Motivaci칩n
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 츼rea de entrada -->
                <div class="chat-input-section">
                    <!-- Preguntas r치pidas -->
                    <div class="quick-questions-panel">
                        <div class="quick-questions-header">
                            <i class="fas fa-lightbulb"></i>
                            <span>Preguntas frecuentes</span>
                        </div>
                        <div class="quick-questions-grid">
                            <button class="quick-question-btn" data-question="쮺칩mo puedo aumentar mi masa muscular de forma efectiva?">
                                游눩 Ganar m칰sculo
                            </button>
                            <button class="quick-question-btn" data-question="쯈u칠 debo comer para perder grasa abdominal?">
                                游꼝 Perder grasa
                            </button>
                            <button class="quick-question-btn" data-question="쮺칩mo mejorar mi resistencia cardiovascular?">
                                游끢꽥뗵勇 Resistencia
                            </button>
                            <button class="quick-question-btn" data-question="쮺u치l es la mejor rutina para principiantes?">
                                游끪勇꽥뗵勇 Rutina inicio
                            </button>
                            <button class="quick-question-btn" data-question="쮺칩mo calcular mis macros diarios?">
                                游늵 Calcular macros
                            </button>
                            <button class="quick-question-btn" data-question="쯈u칠 ejercicios para fortalecer la espalda?">
                                游붯 Espalda sana
                            </button>
                        </div>
                    </div>
                    
                    <!-- Entrada de texto -->
                    <div class="message-input-area">
                        <div class="input-wrapper">
                            <textarea id="chatInput" placeholder="Escribe tu pregunta o describe lo que necesitas..." rows="3"></textarea>
                            <div class="input-actions">
                                <button class="input-action-btn" id="voiceInputBtn" title="Entrada por voz">
                                    <i class="fas fa-microphone"></i>
                                </button>
                                <button class="input-action-btn" id="attachFileBtn" title="Adjuntar archivo">
                                    <i class="fas fa-paperclip"></i>
                                </button>
                            </div>
                        </div>
                        <div class="send-button-container">
                            <button id="sendMessageBtn" class="send-message-btn">
                                <i class="fas fa-paper-plane"></i>
                                <span>Enviar</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Sugerencias de IA -->
                    <div class="ai-suggestions-bar">
                        <span class="suggestions-label">
                            <i class="fas fa-magic"></i> El coach sugiere preguntar sobre:
                        </span>
                        <div class="suggestions-buttons">
                            <button class="suggestion-btn" data-suggestion="progreso semanal">
                                Tu progreso semanal
                            </button>
                            <button class="suggestion-btn" data-suggestion="ajustar dieta">
                                Ajustar tu dieta
                            </button>
                            <button class="suggestion-btn" data-suggestion="plan entrenamiento">
                                Plan de entrenamiento
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Panel de recomendaciones y an치lisis -->
            <div class="coach-recommendations-panel">
                <!-- An치lisis del d칤a -->
                <div class="daily-analysis-card">
                    <div class="analysis-header">
                        <h4><i class="fas fa-chart-pie"></i> An치lisis del D칤a</h4>
                        <span class="analysis-date">Hoy</span>
                    </div>
                    <div class="analysis-content">
                        <div class="analysis-item positive">
                            <i class="fas fa-check-circle"></i>
                            <div class="analysis-text">
                                <strong>Prote칤na 칩ptima</strong>
                                <p>Has alcanzado el 95% de tu objetivo proteico</p>
                            </div>
                        </div>
                        <div class="analysis-item warning">
                            <i class="fas fa-exclamation-triangle"></i>
                            <div class="analysis-text">
                                <strong>Hidrataci칩n baja</strong>
                                <p>Solo has bebido 1.5L, meta: 3L</p>
                            </div>
                        </div>
                        <div class="analysis-item info">
                            <i class="fas fa-info-circle"></i>
                            <div class="analysis-text">
                                <strong>Ejercicio pendiente</strong>
                                <p>Te queda 1 sesi칩n de entrenamiento hoy</p>
                            </div>
                        </div>
                    </div>
                    <button class="view-details-btn">
                        <i class="fas fa-chevron-right"></i> Ver an치lisis completo
                    </button>
                </div>
                
                <!-- Recomendaciones personalizadas -->
                <div class="recommendations-card">
                    <div class="recommendations-header">
                        <h4><i class="fas fa-star"></i> Recomendaciones</h4>
                        <div class="recommendations-badge">3 nuevas</div>
                    </div>
                    <div class="recommendations-list">
                        <div class="recommendation-item">
                            <div class="recommendation-icon">
                                <i class="fas fa-dumbbell"></i>
                            </div>
                            <div class="recommendation-content">
                                <h5>Aumenta peso en press banca</h5>
                                <p>Basado en tu progreso, puedes aumentar 2.5kg en tu pr칩ximo entrenamiento.</p>
                                <span class="recommendation-category">Entrenamiento</span>
                            </div>
                        </div>
                        <div class="recommendation-item">
                            <div class="recommendation-icon">
                                <i class="fas fa-apple-alt"></i>
                            </div>
                            <div class="recommendation-content">
                                <h5>Incluye m치s fibra</h5>
                                <p>Tu consumo de fibra est치 bajo, a침ade verduras en la cena.</p>
                                <span class="recommendation-category">Nutrici칩n</span>
                            </div>
                        </div>
                        <div class="recommendation-item">
                            <div class="recommendation-icon">
                                <i class="fas fa-bed"></i>
                            </div>
                            <div class="recommendation-content">
                                <h5>Mejora tu sue침o</h5>
                                <p>Duerme 30 minutos m치s para optimizar la recuperaci칩n muscular.</p>
                                <span class="recommendation-category">Recuperaci칩n</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Plan de acci칩n -->
                <div class="action-plan-card">
                    <div class="action-plan-header">
                        <h4><i class="fas fa-tasks"></i> Plan de Acci칩n</h4>
                        <div class="plan-progress">
                            <span class="progress-text">2/5 completadas</span>
                            <div class="progress-circle-small">
                                <div class="circle-progress" style="--progress: 40"></div>
                            </div>
                        </div>
                    </div>
                    <div class="action-plan-list">
                        <div class="plan-item completed">
                            <div class="plan-checkbox">
                                <i class="fas fa-check"></i>
                            </div>
                            <span class="plan-text">Beber 2L de agua</span>
                        </div>
                        <div class="plan-item completed">
                            <div class="plan-checkbox">
                                <i class="fas fa-check"></i>
                            </div>
                            <span class="plan-text">Consumir 120g prote칤na</span>
                        </div>
                        <div class="plan-item current">
                            <div class="plan-checkbox">
                                <i class="fas fa-clock"></i>
                            </div>
                            <span class="plan-text">Sesi칩n de piernas</span>
                        </div>
                        <div class="plan-item pending">
                            <div class="plan-checkbox">
                                <i class="far fa-circle"></i>
                            </div>
                            <span class="plan-text">Estirar 15 minutos</span>
                        </div>
                        <div class="plan-item pending">
                            <div class="plan-checkbox">
                                <i class="far fa-circle"></i>
                            </div>
                            <span class="plan-text">Dormir 8 horas</span>
                        </div>
                    </div>
                    <button class="generate-plan-btn">
                        <i class="fas fa-robot"></i> Generar nuevo plan
                    </button>
                </div>
                
                <!-- Estad칤sticas r치pidas -->
                <div class="quick-stats-card">
                    <h4><i class="fas fa-tachometer-alt"></i> Tus Estad칤sticas</h4>
                    <div class="stats-grid-mini">
                        <div class="stat-mini">
                            <div class="stat-value-mini">1,850</div>
                            <div class="stat-label-mini">Calor칤as hoy</div>
                        </div>
                        <div class="stat-mini">
                            <div class="stat-value-mini">112g</div>
                            <div class="stat-label-mini">Prote칤na</div>
                        </div>
                        <div class="stat-mini">
                            <div class="stat-value-mini">7</div>
                            <div class="stat-label-mini">D칤as seguidos</div>
                        </div>
                        <div class="stat-mini">
                            <div class="stat-value-mini">3</div>
                            <div class="stat-label-mini">Entrenamientos</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CONFIGURACI칍N (CON TEST) -->
    <section id="settings" class="content-section" role="tabpanel" aria-labelledby="settings-tab" hidden>
        <div class="section-header">
            <h2><i class="fas fa-cog"></i> Configuraci칩n</h2>
            <p class="section-subtitle">Personaliza tus metas y preferencias</p>
        </div>
        
        <div class="meals-container">
            <!-- Metas diarias -->
            <div class="meals-form">
                <h3><i class="fas fa-bullseye"></i> Metas Diarias</h3>
                
                <div class="goal-setting">
                    <div class="form-group">
                        <label for="calorieGoalInput">
                            <i class="fas fa-fire"></i> Calor칤as Diarias
                        </label>
                        <input type="number" id="calorieGoalInput" value="2500" min="1000" max="10000">
                        <div class="goal-hint">
                            <i class="fas fa-info-circle"></i>
                            Recomendado: 2000-2500 kcal
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="proteinGoalInput">
                            <i class="fas fa-dna"></i> Prote칤na Diaria (g)
                        </label>
                        <input type="number" id="proteinGoalInput" value="120" min="50" max="300">
                        <div class="goal-hint">
                            <i class="fas fa-info-circle"></i>
                            Recomendado: 1.6-2.2g por kg de peso
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="waterGoalInput">
                            <i class="fas fa-tint"></i> Agua Diaria (ml)
                        </label>
                        <input type="number" id="waterGoalInput" value="3000" min="1000" max="10000">
                        <div class="goal-hint">
                            <i class="fas fa-info-circle"></i>
                            Recomendado: 30-35ml por kg de peso
                        </div>
                    </div>
                </div>
                
                <button id="saveGoalsBtn" class="primary-btn" style="width: 100%; margin-top: var(--space-lg);">
                    <i class="fas fa-save"></i> Guardar Metas
                </button>
                
                <!-- TEST DE PERSONALIZACI칍N -->
                <div class="test-section">
                    <h3><i class="fas fa-clipboard-check"></i> Test de Personalizaci칩n</h3>
                    <p>Responde estas preguntas para que podamos crear un plan perfectamente adaptado a ti.</p>
                    
                    <button id="startTestBtn" class="primary-btn" style="width: 100%; margin-top: var(--space-md);">
                        <i class="fas fa-play"></i> Comenzar Test
                    </button>
                </div>
            </div>
            
            <!-- Otras configuraciones -->
            <div class="meals-list">
                <h3><i class="fas fa-sliders-h"></i> Preferencias</h3>
                
                <div class="form-group" style="margin-bottom: var(--space-lg);">
                    <label>
                        <input type="checkbox" id="darkModeToggle" checked>
                        <span>Modo Oscuro</span>
                    </label>
                </div>
                
                <div class="form-group" style="margin-bottom: var(--space-lg);">
                    <label>
                        <input type="checkbox" id="notificationsToggle" checked>
                        <span>Notificaciones</span>
                    </label>
                </div>
                
                <div class="form-group" style="margin-bottom: var(--space-lg);">
                    <label for="languageSelect">
                        <i class="fas fa-language"></i> Idioma
                    </label>
                    <select id="languageSelect" class="month-select">
                        <option value="es">Espa침ol</option>
                        <option value="en">English</option>
                    </select>
                </div>
                
                <!-- Perfil del usuario -->
                <div class="user-profile">
                    <h3><i class="fas fa-user"></i> Tu Perfil</h3>
                    <div class="profile-info">
                        <div class="info-item">
                            <span class="info-label">Edad:</span>
                            <span id="userAge">-- a침os</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Altura:</span>
                            <span id="userHeight">-- cm</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Objetivo principal:</span>
                            <span id="userGoal">--</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Nivel:</span>
                            <span id="userLevel">--</span>
                        </div>
                    </div>
                    <button id="editProfileBtn" class="secondary-btn" style="width: 100%; margin-top: var(--space-md);">
                        <i class="fas fa-edit"></i> Editar Perfil
                    </button>
                </div>
                
                <div class="form-actions">
                    <button class="secondary-btn" onclick="clearAllData()">
                        <i class="fas fa-trash"></i> Limpiar Datos
                    </button>
                    <button class="primary-btn" onclick="backupData()">
                        <i class="fas fa-cloud-upload-alt"></i> Respaldar
                    </button>
                </div>
            </div>
        </div>
    </section>
</main>

<!-- MODAL PARA TEST DE PERSONALIZACI칍N -->
<div id="testModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="testModalTitle" hidden>
    <div class="modal-content" style="max-width: 800px;">
        <div class="modal-header">
            <h3 id="testModalTitle"><i class="fas fa-clipboard-check"></i> Test de Personalizaci칩n</h3>
            <button class="modal-close" onclick="closeTestModal()" aria-label="Cerrar modal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <div id="testProgress" class="test-progress">
                <div class="progress-bar">
                    <div id="testProgressFill" class="progress-fill" style="width: 0%"></div>
                </div>
                <div class="progress-text">Pregunta <span id="currentQuestion">1</span> de <span id="totalQuestions">10</span></div>
            </div>
            
            <div id="testContent" class="test-content">
                <!-- Las preguntas se cargan din치micamente -->
            </div>
        </div>
        <div class="modal-footer">
            <button id="testPrevBtn" class="btn-secondary" disabled>
                <i class="fas fa-arrow-left"></i> Anterior
            </button>
            <button id="testNextBtn" class="btn-primary">
                Siguiente <i class="fas fa-arrow-right"></i>
            </button>
        </div>
    </div>
</div>

<!-- MODAL PARA EDITAR PERFIL -->
<div id="profileModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="profileModalTitle" hidden>
    <div class="modal-content" style="max-width: 600px;">
        <div class="modal-header">
            <h3 id="profileModalTitle"><i class="fas fa-user-edit"></i> Editar Perfil</h3>
            <button class="modal-close" onclick="closeProfileModal()" aria-label="Cerrar modal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label for="editAge">
                    <i class="fas fa-birthday-cake"></i> Edad (a침os)
                </label>
                <input type="number" id="editAge" min="15" max="100" placeholder="Ej: 25">
            </div>
            
            <div class="form-group">
                <label for="editHeight">
                    <i class="fas fa-ruler-vertical"></i> Altura (cm)
                </label>
                <input type="number" id="editHeight" min="100" max="250" placeholder="Ej: 175">
            </div>
            
            <div class="form-group">
                <label for="editGender">
                    <i class="fas fa-venus-mars"></i> G칠nero
                </label>
                <select id="editGender" class="month-select">
                    <option value="male">Hombre</option>
                    <option value="female">Mujer</option>
                    <option value="other">Otro</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="editGoal">
                    <i class="fas fa-bullseye"></i> Objetivo principal
                </label>
                <select id="editGoal" class="month-select">
                    <option value="lose">Perder grasa</option>
                    <option value="gain">Ganar m칰sculo</option>
                    <option value="maintain">Mantenerse</option>
                    <option value="strength">Aumentar fuerza</option>
                    <option value="endurance">Mejorar resistencia</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="editLevel">
                    <i class="fas fa-signal"></i> Nivel de experiencia
                </label>
                <select id="editLevel" class="month-select">
                    <option value="beginner">Principiante</option>
                    <option value="intermediate">Intermedio</option>
                    <option value="advanced">Avanzado</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="editActivity">
                    <i class="fas fa-running"></i> Nivel de actividad
                </label>
                <select id="editActivity" class="month-select">
                    <option value="sedentary">Sedentario</option>
                    <option value="light">Ligero</option>
                    <option value="moderate">Moderado</option>
                    <option value="active">Activo</option>
                    <option value="very_active">Muy activo</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="editDiet">
                    <i class="fas fa-utensils"></i> Tipo de dieta preferida
                </label>
                <select id="editDiet" class="month-select">
                    <option value="balanced">Balanceada</option>
                    <option value="vegetarian">Vegetariana</option>
                    <option value="vegan">Vegana</option>
                    <option value="lowcarb">Baja en carbohidratos</option>
                    <option value="highprotein">Alta en prote칤na</option>
                </select>
            </div>
        </div>
        <div class="modal-footer">
            <button onclick="closeProfileModal()" class="btn-secondary">Cancelar</button>
            <button onclick="saveProfile()" class="btn-primary">Guardar Perfil</button>
        </div>
    </div>
</div>

<!-- Modal para confirmaciones -->
<div id="confirmModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" hidden>
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="modalTitle">Confirmar acci칩n</h3>
            <button class="modal-close" aria-label="Cerrar modal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <p id="modalMessage">쮼st치s seguro de que quieres realizar esta acci칩n?</p>
        </div>
        <div class="modal-footer">
            <button id="modalCancel" class="btn-secondary">Cancelar</button>
            <button id="modalConfirm" class="btn-primary">Confirmar</button>
        </div>
    </div>
</div>

<!-- Notificaciones toast -->
<div id="toastContainer" class="toast-container"></div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.min.js"></script>
<script src="script.js"></script>
</body>
</html>
