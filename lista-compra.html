<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lista de la Compra | AI Fitness Tracker</title>
  <!-- Fuentes y estilos -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="style.css">
</head>
<body class="shopping-body">

<!-- Canvas para efecto Matrix (si lo usas) -->
<canvas id="matrixCanvas"></canvas>

<!-- Header principal - Igual que index.html -->
<header class="main-header">
    <div class="header-container">
        <div class="logo-section">
            <div class="logo-icon">
                <i class="fas fa-shopping-cart"></i>
            </div>
            <div class="logo-text">
                <h1>AI FITNESS SHOPPING</h1>
                <p class="subtitle">NUTRI-LIST v2.0 | SMART GROCERIES</p>
            </div>
        </div>
        
        <div class="header-controls">
            <div class="clock-display">
                <div class="time" id="currentTime">--:--:--</div>
                <div class="date" id="currentDate">--- --- -- ----</div>
            </div>
            
            <a href="index.html" class="gym-mode-btn" style="text-decoration: none;">
                <i class="fas fa-home"></i>
                <span>VOLVER AL INICIO</span>
            </a>
            
            <button id="themeToggle" class="theme-toggle" aria-label="Cambiar tema">
                <i class="fas fa-moon"></i>
            </button>
        </div>
    </div>
</header>

<div class="shopping-container">
  <!-- Panel de control superior -->
  <div class="shopping-control-panel">
    <div class="shopping-header">
      <h1><i class="fas fa-shopping-basket"></i> Lista de la Compra Inteligente</h1>
      <p class="shopping-subtitle">Gesti√≥n optimizada de alimentos para tu dieta fitness</p>
    </div>
    
    <div class="shopping-stats">
      <div class="stat-card shopping-stat">
        <div class="card-header">
          <h3><i class="fas fa-check-circle"></i> Progreso</h3>
          <span class="goal-text" id="progressText">0% completado</span>
        </div>
        <div class="card-body">
          <div class="main-value" id="contador">0/0 comprados</div>
          <div class="progress-container">
            <div class="progress-bar" role="progressbar">
              <div class="progress-fill" id="shoppingProgress" style="width: 0%"></div>
            </div>
            <div class="progress-labels">
              <span id="progressPercent">0%</span>
              <span id="remainingItems">0 items restantes</span>
            </div>
          </div>
        </div>
      </div>
      
      <div class="stat-card shopping-stat">
        <div class="card-header">
          <h3><i class="fas fa-search"></i> Buscador Inteligente</h3>
          <span class="goal-text"><i class="fas fa-robot"></i> IA Search</span>
        </div>
        <div class="card-body">
          <div class="search-container">
            <i class="fas fa-search search-icon"></i>
            <input type="text" id="busqueda" placeholder="üîç Buscar alimento o categor√≠a..." class="smart-search">
            <button class="clear-search" id="clearSearchBtn">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="search-hint">
            <small><i class="fas fa-lightbulb"></i> Escribe para filtrar por nombre, categor√≠a o tipo</small>
          </div>
        </div>
      </div>
      
      <div class="stat-card shopping-stat">
        <div class="card-header">
          <h3><i class="fas fa-tools"></i> Acciones R√°pidas</h3>
        </div>
        <div class="card-body">
          <div class="quick-actions">
            <button class="action-btn small-btn" onclick="marcarTodo(true)">
              <i class="fas fa-check-double"></i> Marcar todo
            </button>
            <button class="action-btn small-btn secondary-btn" onclick="marcarTodo(false)">
              <i class="fas fa-redo"></i> Reiniciar
            </button>
            <button class="action-btn small-btn" onclick="exportList()">
              <i class="fas fa-download"></i> Exportar
            </button>
            <button class="action-btn small-btn secondary-btn" onclick="printList()">
              <i class="fas fa-print"></i> Imprimir
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Categor√≠as con dise√±o mejorado -->
  <div class="categories-container">
    
    <!-- Prote√≠nas -->
    <div class="category-card" id="proteinas-card">
      <div class="category-header" onclick="toggleLista('proteinas')">
        <div class="category-icon">
          <i class="fas fa-drumstick-bite"></i>
        </div>
        <div class="category-title">
          <h2>ü•© Prote√≠nas Esenciales</h2>
          <p class="category-subtitle">Para construcci√≥n muscular y recuperaci√≥n</p>
        </div>
        <div class="category-stats">
          <span class="category-count" id="proteinas-count">0/10</span>
          <i class="fas fa-chevron-down toggle-icon" id="proteinas-icon"></i>
        </div>
      </div>
      <ul id="proteinas" class="shopping-list">
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Pechugas de pollo <span class="item-quantity">(5 kg)</span></span>
            <span class="item-priority high">ALTA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Pavo en filetes/picado <span class="item-quantity">(3 kg)</span></span>
            <span class="item-priority high">ALTA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Huevos <span class="item-quantity">(10 docenas)</span></span>
            <span class="item-priority high">ALTA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">At√∫n en lata <span class="item-quantity">(20 latas)</span></span>
            <span class="item-priority medium">MEDIA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Salm√≥n fresco/congelado <span class="item-quantity">(1,5 kg)</span></span>
            <span class="item-priority medium">MEDIA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Merluza o pescado blanco <span class="item-quantity">(1,5 kg)</span></span>
            <span class="item-priority medium">MEDIA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Carne magra de ternera <span class="item-quantity">(1,5 kg)</span></span>
            <span class="item-priority medium">MEDIA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Queso fresco batido 0% <span class="item-quantity">(4 kg)</span></span>
            <span class="item-priority low">BAJA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Yogur griego natural sin az√∫car <span class="item-quantity">(2 kg)</span></span>
            <span class="item-priority low">BAJA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Clara de huevo l√≠quida <span class="item-quantity">(2 litros)</span></span>
            <span class="item-priority low">BAJA</span>
          </label>
        </li>
      </ul>
    </div>

    <!-- Carbohidratos -->
    <div class="category-card" id="carbohidratos-card">
      <div class="category-header" onclick="toggleLista('carbohidratos')">
        <div class="category-icon">
          <i class="fas fa-bread-slice"></i>
        </div>
        <div class="category-title">
          <h2>üçö Carbohidratos Complejos</h2>
          <p class="category-subtitle">Energ√≠a sostenida y recuperaci√≥n gluc√©mica</p>
        </div>
        <div class="category-stats">
          <span class="category-count" id="carbohidratos-count">0/8</span>
          <i class="fas fa-chevron-down toggle-icon" id="carbohidratos-icon"></i>
        </div>
      </div>
      <ul id="carbohidratos" class="shopping-list">
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Avena <span class="item-quantity">(3 kg)</span></span>
            <span class="item-priority high">ALTA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Arroz integral <span class="item-quantity">(5 kg)</span></span>
            <span class="item-priority high">ALTA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Pasta integral <span class="item-quantity">(4 kg)</span></span>
            <span class="item-priority high">ALTA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Pan integral <span class="item-quantity">(8 barras)</span></span>
            <span class="item-priority medium">MEDIA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Patatas <span class="item-quantity">(5 kg)</span></span>
            <span class="item-priority medium">MEDIA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Boniatos/batatas <span class="item-quantity">(3 kg)</span></span>
            <span class="item-priority medium">MEDIA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Tortillas de trigo integral <span class="item-quantity">(2 paquetes)</span></span>
            <span class="item-priority low">BAJA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Harina integral <span class="item-quantity">(1 kg)</span></span>
            <span class="item-priority low">BAJA</span>
          </label>
        </li>
      </ul>
    </div>

    <!-- Grasas saludables -->
    <div class="category-card" id="grasas-card">
      <div class="category-header" onclick="toggleLista('grasas')">
        <div class="category-icon">
          <i class="fas fa-seedling"></i>
        </div>
        <div class="category-title">
          <h2>ü•ë Grasas Saludables</h2>
          <p class="category-subtitle">√Åcidos grasos esenciales y salud hormonal</p>
        </div>
        <div class="category-stats">
          <span class="category-count" id="grasas-count">0/5</span>
          <i class="fas fa-chevron-down toggle-icon" id="grasas-icon"></i>
        </div>
      </div>
      <ul id="grasas" class="shopping-list">
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Aguacates <span class="item-quantity">(10 uds)</span></span>
            <span class="item-priority high">ALTA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Aceite de oliva virgen extra <span class="item-quantity">(1,5 L)</span></span>
            <span class="item-priority high">ALTA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Frutos secos variados <span class="item-quantity">(2 kg)</span></span>
            <span class="item-priority medium">MEDIA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Semillas de ch√≠a o lino <span class="item-quantity">(500 g)</span></span>
            <span class="item-priority medium">MEDIA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Crema de cacahuete <span class="item-quantity">(1 kg)</span></span>
            <span class="item-priority low">BAJA</span>
          </label>
        </li>
      </ul>
    </div>

    <!-- Frutas -->
    <div class="category-card" id="frutas-card">
      <div class="category-header" onclick="toggleLista('frutas')">
        <div class="category-icon">
          <i class="fas fa-apple-alt"></i>
        </div>
        <div class="category-title">
          <h2>üçå Frutas Frescas</h2>
          <p class="category-subtitle">Vitaminas, fibra y antioxidantes naturales</p>
        </div>
        <div class="category-stats">
          <span class="category-count" id="frutas-count">0/5</span>
          <i class="fas fa-chevron-down toggle-icon" id="frutas-icon"></i>
        </div>
      </div>
      <ul id="frutas" class="shopping-list">
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Pl√°tanos <span class="item-quantity">(40-50 uds)</span></span>
            <span class="item-priority high">ALTA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Manzanas <span class="item-quantity">(30 uds)</span></span>
            <span class="item-priority high">ALTA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Naranjas <span class="item-quantity">(20 uds)</span></span>
            <span class="item-priority medium">MEDIA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Fresas/frutos rojos <span class="item-quantity">(1,5 kg)</span></span>
            <span class="item-priority medium">MEDIA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Uvas o mandarinas <span class="item-quantity">(2 kg)</span></span>
            <span class="item-priority low">BAJA</span>
          </label>
        </li>
      </ul>
    </div>

    <!-- Verduras -->
    <div class="category-card" id="verduras-card">
      <div class="category-header" onclick="toggleLista('verduras')">
        <div class="category-icon">
          <i class="fas fa-carrot"></i>
        </div>
        <div class="category-title">
          <h2>ü•¶ Verduras y Hortalizas</h2>
          <p class="category-subtitle">Fibra, minerales y fitonutrientes esenciales</p>
        </div>
        <div class="category-stats">
          <span class="category-count" id="verduras-count">0/8</span>
          <i class="fas fa-chevron-down toggle-icon" id="verduras-icon"></i>
        </div>
      </div>
      <ul id="verduras" class="shopping-list">
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Espinacas <span class="item-quantity">(2 kg)</span></span>
            <span class="item-priority high">ALTA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Br√≥coli <span class="item-quantity">(2 kg)</span></span>
            <span class="item-priority high">ALTA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Pimientos <span class="item-quantity">(2 kg)</span></span>
            <span class="item-priority medium">MEDIA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Calabacines <span class="item-quantity">(1,5 kg)</span></span>
            <span class="item-priority medium">MEDIA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Zanahorias <span class="item-quantity">(2 kg)</span></span>
            <span class="item-priority medium">MEDIA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Tomates <span class="item-quantity">(2 kg)</span></span>
            <span class="item-priority medium">MEDIA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Lechuga <span class="item-quantity">(1,5 kg)</span></span>
            <span class="item-priority low">BAJA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Cebollas <span class="item-quantity">(1,5 kg)</span></span>
            <span class="item-priority low">BAJA</span>
          </label>
        </li>
      </ul>
    </div>

    <!-- L√°cteos -->
    <div class="category-card" id="lacteos-card">
      <div class="category-header" onclick="toggleLista('lacteos')">
        <div class="category-icon">
          <i class="fas fa-cheese"></i>
        </div>
        <div class="category-title">
          <h2>ü•õ L√°cteos y Alternativas</h2>
          <p class="category-subtitle">Calcio, prote√≠na y probi√≥ticos</p>
        </div>
        <div class="category-stats">
          <span class="category-count" id="lacteos-count">0/3</span>
          <i class="fas fa-chevron-down toggle-icon" id="lacteos-icon"></i>
        </div>
      </div>
      <ul id="lacteos" class="shopping-list">
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Leche <span class="item-quantity">(12 litros)</span></span>
            <span class="item-priority high">ALTA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Queso fresco batido</span>
            <span class="item-priority medium">MEDIA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Yogur griego natural</span>
            <span class="item-priority medium">MEDIA</span>
          </label>
        </li>
      </ul>
    </div>

    <!-- L√≠quidos e hidrataci√≥n -->
    <div class="category-card" id="liquidos-card">
      <div class="category-header" onclick="toggleLista('liquidos')">
        <div class="category-icon">
          <i class="fas fa-tint"></i>
        </div>
        <div class="category-title">
          <h2>ü•§ Hidrataci√≥n & Energ√≠a</h2>
          <p class="category-subtitle">Hidrataci√≥n √≥ptima y bebidas funcionales</p>
        </div>
        <div class="category-stats">
          <span class="category-count" id="liquidos-count">0/10</span>
          <i class="fas fa-chevron-down toggle-icon" id="liquidos-icon"></i>
        </div>
      </div>
      <ul id="liquidos" class="shopping-list">
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Botellas peque√±as de agua mineral <span class="item-quantity">(0,5L - 12 uds)</span></span>
            <span class="item-priority high">ALTA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Agua de coco natural <span class="item-quantity">(4 botellas)</span></span>
            <span class="item-priority medium">MEDIA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Bebida isot√≥nica baja en az√∫car <span class="item-quantity">(6 botellas)</span></span>
            <span class="item-priority medium">MEDIA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Agua saborizada natural</span>
            <span class="item-priority low">BAJA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Infusiones suaves <span class="item-quantity">(20 sobres)</span></span>
            <span class="item-priority low">BAJA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Zumo natural sin az√∫car <span class="item-quantity">(3 litros)</span></span>
            <span class="item-priority medium">MEDIA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Leche semidesnatada o bebida vegetal <span class="item-quantity">(8 litros)</span></span>
            <span class="item-priority high">ALTA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Bebida pre-entreno natural</span>
            <span class="item-priority medium">MEDIA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Monster Zero o Reign <span class="item-quantity">(m√°x. 1-2 por semana)</span></span>
            <span class="item-priority low">BAJA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Bebida con electrolitos sin az√∫car</span>
            <span class="item-priority medium">MEDIA</span>
          </label>
        </li>
      </ul>
    </div>

    <!-- Suplementos -->
    <div class="category-card" id="suplementos-card">
      <div class="category-header" onclick="toggleLista('suplementos')">
        <div class="category-icon">
          <i class="fas fa-capsules"></i>
        </div>
        <div class="category-title">
          <h2>üíä Suplementos Deportivos</h2>
          <p class="category-subtitle">Apoyo nutricional y optimizaci√≥n del rendimiento</p>
        </div>
        <div class="category-stats">
          <span class="category-count" id="suplementos-count">0/5</span>
          <i class="fas fa-chevron-down toggle-icon" id="suplementos-icon"></i>
        </div>
      </div>
      <ul id="suplementos" class="shopping-list">
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Vitamina C + Zinc</span>
            <span class="item-priority high">ALTA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Magnesio + Calcio</span>
            <span class="item-priority high">ALTA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Prote√≠na whey <span class="item-quantity">(2 kg)</span></span>
            <span class="item-priority high">ALTA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Creatina monohidrato <span class="item-quantity">(500 g)</span></span>
            <span class="item-priority medium">MEDIA</span>
          </label>
        </li>
        <li>
          <label class="checkbox-container">
            <input type="checkbox">
            <span class="checkmark"></span>
            <span class="item-text">Multivitam√≠nico</span>
            <span class="item-priority medium">MEDIA</span>
          </label>
        </li>
      </ul>
    </div>
  </div>

  <!-- Panel de acciones finales -->
  <div class="bottom-controls">
    <div class="summary-card">
      <h3><i class="fas fa-chart-pie"></i> Resumen de Compra</h3>
      <div class="summary-grid">
        <div class="summary-item">
          <span class="summary-label">Total Items:</span>
          <span class="summary-value" id="totalItems">0</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">Completados:</span>
          <span class="summary-value" id="completedItems">0</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">Por Comprar:</span>
          <span class="summary-value" id="pendingItems">0</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">Prioridad Alta:</span>
          <span class="summary-value" id="highPriority">0</span>
        </div>
      </div>
    </div>
    
    <div class="action-buttons-bottom">
      <a href="index.html" class="back-btn">
        <i class="fas fa-arrow-left"></i>
        Volver al Dashboard
      </a>
      <button class="primary-btn" onclick="shareList()">
        <i class="fas fa-share-alt"></i>
        Compartir Lista
      </button>
      <button class="secondary-btn" onclick="generateSmartList()">
        <i class="fas fa-robot"></i>
        Generar Lista IA
      </button>
    </div>
  </div>
</div>

<!-- Notificaciones toast -->
<div id="toastContainer" class="toast-container"></div>

<script>
  // Variables globales
  let isDarkMode = true; // Por defecto modo oscuro
  
  // Inicializaci√≥n
  document.addEventListener('DOMContentLoaded', function() {
    initTheme();
    initShoppingList();
    setupEventListeners();
    updateClock();
    setInterval(updateClock, 1000);
  });

  // Inicializar tema
  function initTheme() {
    // Cargar preferencia de tema
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'light') {
      isDarkMode = false;
      document.body.classList.remove('dark-mode');
      document.body.classList.add('light-mode');
      updateThemeIcon();
    } else {
      // Por defecto modo oscuro
      isDarkMode = true;
      document.body.classList.add('dark-mode');
      document.body.classList.remove('light-mode');
      updateThemeIcon();
    }
    
    // Configurar bot√≥n de tema
    const themeToggle = document.getElementById('themeToggle');
    if (themeToggle) {
      themeToggle.addEventListener('click', toggleTheme);
    }
  }

  // Alternar tema claro/oscuro
  function toggleTheme() {
    isDarkMode = !isDarkMode;
    
    if (isDarkMode) {
      document.body.classList.add('dark-mode');
      document.body.classList.remove('light-mode');
      localStorage.setItem('theme', 'dark');
    } else {
      document.body.classList.remove('dark-mode');
      document.body.classList.add('light-mode');
      localStorage.setItem('theme', 'light');
    }
    
    updateThemeIcon();
  }

  // Actualizar icono del tema
  function updateThemeIcon() {
    const themeIcon = document.querySelector('#themeToggle i');
    if (themeIcon) {
      if (isDarkMode) {
        themeIcon.className = 'fas fa-moon';
        themeIcon.setAttribute('aria-label', 'Cambiar a modo claro');
      } else {
        themeIcon.className = 'fas fa-sun';
        themeIcon.setAttribute('aria-label', 'Cambiar a modo oscuro');
      }
    }
  }

  // Reloj en tiempo real
  function updateClock() {
    const now = new Date();
    const timeElement = document.getElementById('currentTime');
    const dateElement = document.getElementById('currentDate');
    
    if (timeElement) {
      timeElement.textContent = now.toLocaleTimeString('es-ES', {hour12: false});
    }
    
    if (dateElement) {
      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      dateElement.textContent = now.toLocaleDateString('es-ES', options);
    }
  }

  // Inicializar lista de compras
  function initShoppingList() {
    // Reinicio autom√°tico mensual
    const currentMonth = new Date().getMonth();
    const savedMonth = localStorage.getItem('shoppingMonth');
    
    if (!savedMonth || parseInt(savedMonth) !== currentMonth) {
      localStorage.clear();
      localStorage.setItem('shoppingMonth', currentMonth);
      showNotification('¬°Nuevo mes! Lista reiniciada autom√°ticamente.', 'info');
    }

    // Cargar datos guardados
    loadSavedData();
    
    // Actualizar contadores iniciales
    updateAllCounts();
    updateProgress();
    
    // Configurar todas las listas como visibles por defecto
    document.querySelectorAll('.shopping-list').forEach(list => {
      list.style.display = 'block';
    });
  }

  // Configurar event listeners
  function setupEventListeners() {
    // Buscador
    document.getElementById('busqueda').addEventListener('input', function(e) {
      filterItems(e.target.value.toLowerCase());
    });
    
    // Bot√≥n limpiar b√∫squeda
    document.getElementById('clearSearchBtn').addEventListener('click', function() {
      document.getElementById('busqueda').value = '';
      filterItems('');
    });
    
    // Checkboxes
    document.querySelectorAll('.checkbox-container input[type="checkbox"]').forEach((checkbox, index) => {
      // Cargar estado guardado
      const savedState = localStorage.getItem(`shoppingItem_${index}`);
      if (savedState === 'true') {
        checkbox.checked = true;
      }
      
      // Guardar estado al cambiar
      checkbox.addEventListener('change', function() {
        localStorage.setItem(`shoppingItem_${index}`, this.checked);
        updateAllCounts();
        updateProgress();
        updateCategoryCount(this.closest('.category-card').id.replace('-card', ''));
      });
    });
  }

  // Filtrar items
  function filterItems(searchTerm) {
    const items = document.querySelectorAll('.shopping-list li');
    let visibleCount = 0;
    
    items.forEach(item => {
      const text = item.textContent.toLowerCase();
      if (searchTerm === '' || text.includes(searchTerm)) {
        item.style.display = 'flex';
        visibleCount++;
      } else {
        item.style.display = 'none';
      }
    });
    
    // Actualizar contador de b√∫squeda
    const searchCounter = document.getElementById('searchResults');
    if (searchCounter) {
      searchCounter.textContent = `${visibleCount} resultados`;
    }
  }

  // Cargar datos guardados
  function loadSavedData() {
    const checks = document.querySelectorAll('.checkbox-container input[type="checkbox"]');
    checks.forEach((check, i) => {
      if (localStorage.getItem(`shoppingItem_${i}`) === 'true') {
        check.checked = true;
      }
    });
  }

  // Actualizar todos los contadores
  function updateAllCounts() {
    updateProgress();
    updateCategoryCount('proteinas');
    updateCategoryCount('carbohidratos');
    updateCategoryCount('grasas');
    updateCategoryCount('frutas');
    updateCategoryCount('verduras');
    updateCategoryCount('lacteos');
    updateCategoryCount('liquidos');
    updateCategoryCount('suplementos');
    updateSummary();
  }

  // Actualizar progreso general
  function updateProgress() {
    const checks = document.querySelectorAll('.checkbox-container input[type="checkbox"]');
    const total = checks.length;
    const checked = Array.from(checks).filter(c => c.checked).length;
    const progress = total > 0 ? (checked / total) * 100 : 0;
    
    // Actualizar elementos
    document.getElementById('contador').textContent = `${checked}/${total} comprados`;
    document.getElementById('shoppingProgress').style.width = `${progress}%`;
    document.getElementById('progressPercent').textContent = `${Math.round(progress)}%`;
    document.getElementById('remainingItems').textContent = `${total - checked} items restantes`;
    document.getElementById('progressText').textContent = `${Math.round(progress)}% completado`;
  }

  // Actualizar contador de categor√≠a
  function updateCategoryCount(categoryId) {
    const categoryChecks = document.querySelectorAll(`#${categoryId} .checkbox-container input[type="checkbox"]`);
    const total = categoryChecks.length;
    const checked = Array.from(categoryChecks).filter(c => c.checked).length;
    
    const countElement = document.getElementById(`${categoryId}-count`);
    if (countElement) {
      countElement.textContent = `${checked}/${total}`;
    }
    
    // Actualizar icono si la categor√≠a est√° completa
    const categoryCard = document.getElementById(`${categoryId}-card`);
    if (checked === total && total > 0) {
      categoryCard.classList.add('category-complete');
    } else {
      categoryCard.classList.remove('category-complete');
    }
  }

  // Actualizar resumen
  function updateSummary() {
    const checks = document.querySelectorAll('.checkbox-container input[type="checkbox"]');
    const total = checks.length;
    const checked = Array.from(checks).filter(c => c.checked).length;
    const highPriority = document.querySelectorAll('.item-priority.high').length;
    
    document.getElementById('totalItems').textContent = total;
    document.getElementById('completedItems').textContent = checked;
    document.getElementById('pendingItems').textContent = total - checked;
    document.getElementById('highPriority').textContent = highPriority;
  }

  // Marcar/desmarcar todo
  function marcarTodo(estado) {
    const checks = document.querySelectorAll('.checkbox-container input[type="checkbox"]');
    checks.forEach((check, i) => {
      check.checked = estado;
      localStorage.setItem(`shoppingItem_${i}`, estado);
    });
    updateAllCounts();
    
    // Mostrar notificaci√≥n
    const message = estado ? '‚úÖ Todos los items marcados como comprados' : 'üîÑ Lista reiniciada correctamente';
    showNotification(message, estado ? 'success' : 'info');
  }

  // Alternar visibilidad de lista
  function toggleLista(categoryId) {
    const lista = document.getElementById(categoryId);
    const icon = document.getElementById(`${categoryId}-icon`);
    
    if (lista.style.display === 'none') {
      lista.style.display = 'block';
      icon.classList.remove('fa-chevron-down');
      icon.classList.add('fa-chevron-up');
    } else {
      lista.style.display = 'none';
      icon.classList.remove('fa-chevron-up');
      icon.classList.add('fa-chevron-down');
    }
  }

  // Funciones adicionales
  function exportList() {
    const checkedItems = Array.from(document.querySelectorAll('.checkbox-container input[type="checkbox"]:checked'))
      .map(check => check.closest('li').querySelector('.item-text').textContent.trim());
    
    const uncheckedItems = Array.from(document.querySelectorAll('.checkbox-container input[type="checkbox"]:not(:checked)'))
      .map(check => check.closest('li').querySelector('.item-text').textContent.trim());
    
    const exportText = `LISTA DE COMPRA FITNESS - ${new Date().toLocaleDateString()}\n\n` +
                      `‚úÖ COMPRADOS (${checkedItems.length}):\n${checkedItems.join('\n')}\n\n` +
                      `‚è∞ PENDIENTES (${uncheckedItems.length}):\n${uncheckedItems.join('\n')}`;
    
    // Crear y descargar archivo
    const blob = new Blob([exportText], { type: 'text/plain' });
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `lista-compra-fitness-${new Date().toISOString().split('T')[0]}.txt`;
    a.click();
    
    showNotification('üì• Lista exportada correctamente', 'success');
  }

  function printList() {
    window.print();
  }

  function shareList() {
    if (navigator.share) {
      const text = `Mi lista de compra fitness: ${document.getElementById('contador').textContent} completados.`;
      navigator.share({
        title: 'Lista de Compra Fitness',
        text: text,
        url: window.location.href
      });
    } else {
      // Copiar al portapapeles
      const text = `Mi lista de compra fitness:\n${window.location.href}\n\nProgreso: ${document.getElementById('contador').textContent}`;
      navigator.clipboard.writeText(text).then(() => {
        showNotification('üìã Enlace copiado al portapapeles', 'success');
      });
    }
  }

  function generateSmartList() {
    showNotification('ü§ñ Generando lista inteligente con IA...', 'info');
    // Simular generaci√≥n IA
    setTimeout(() => {
      // Marcar autom√°ticamente items de prioridad alta no comprados
      const highPriorityItems = document.querySelectorAll('.item-priority.high');
      let marked = 0;
      highPriorityItems.forEach(item => {
        const checkbox = item.closest('li').querySelector('input[type="checkbox"]');
        if (!checkbox.checked) {
          checkbox.checked = true;
          const index = Array.from(document.querySelectorAll('.checkbox-container input')).indexOf(checkbox);
          localStorage.setItem(`shoppingItem_${index}`, true);
          marked++;
        }
      });
      
      updateAllCounts();
      showNotification(`‚úÖ IA marc√≥ ${marked} items de prioridad alta`, 'success');
    }, 1500);
  }

  // Mostrar notificaciones
  function showNotification(message, type = 'info') {
    // Crear contenedor si no existe
    let toastContainer = document.getElementById('toastContainer');
    if (!toastContainer) {
      toastContainer = document.createElement('div');
      toastContainer.id = 'toastContainer';
      toastContainer.className = 'toast-container';
      document.body.appendChild(toastContainer);
    }
    
    const notification = document.createElement('div');
    notification.className = `toast-notification ${type}`;
    notification.innerHTML = `
      <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'warning' ? 'exclamation-triangle' : 'info-circle'}"></i>
      <span>${message}</span>
    `;
    
    toastContainer.appendChild(notification);
    
    // Animar entrada
    setTimeout(() => notification.classList.add('show'), 10);
    
    // Eliminar despu√©s de 3 segundos
    setTimeout(() => {
      notification.classList.remove('show');
      setTimeout(() => notification.remove(), 300);
    }, 3000);
  }
</script>



</body>
</html>
